\documentclass[12pt,a4paper]{article}

\usepackage[serbian]{babel}


\usepackage{listings}
\usepackage{xcolor} % for setting colors

% text width and height
\textwidth 16cm
\textheight 23cm

% distance from the top
\voffset -1.5cm

% distance from the left
\hoffset 0cm
\oddsidemargin 0mm

% distance from the bottom
\footskip 1.5cm

\linespread{1}

% set the default code style
\lstset{language=python,
     xleftmargin=20pt,
      basicstyle=\ttfamily,
      morekeywords={to, downto, then},
      keywordstyle=\color{blue}\ttfamily,
      stringstyle=\color{red}\ttfamily,
      commentstyle=\color{green}\ttfamily,
      morecomment=[l][\color{magenta}]{\#},
      numbers=left,
      basicstyle=\small
}

\title{Ishrana studenata}
\author{Tijana Jevti\' c \\ Jelena Mrdak}

\setlength\parindent{0pt}

\begin{document}
\maketitle
\begin{abstract}
Koliko su bitne informacije o ishrani dana\v snjim studentima? Da li njihove navike ste\v cene jo\v s u detinjstvu uti\v cu na to koju hranu danas vole da jedu? Koliko uti\v cu njihove kulinarske ve\v stine na na\v cin ishrane?

Na ova i jo\v s mnogobrojna pitanja, poku\v sa\' cemo da odgovorimo u ovom radu.
\end{abstract}

\tableofcontents

\section{Opis skupa podataka}
Skup podataka uklju\v cuje informacije o izboru hrane, ishrani, preferencijama i ostalim informacijama dobijenim od studenata na koled\v zu. Postoji 126 odgovora. Podaci su ravni i nisu o\v ci\v s\' ceni.

\begin{itemize}
  \item GPA\\
    numeri\v cki, prosek na fakultetu
  \item Pol\\
    kategori\v cki\\
    \textbf{1} - \v zensko\\
    \textbf{2} - mu\v sko
  \item Doru\v cak\\
    Ispitanicima je ponu\dj ena slika pahuljica i krofne i treba da ka\v zu \v sta ih asocira na doru\v cak\\
    \textbf{1} - pahuljice\\
    \textbf{2} - krofna 
  \item Procena kalorija u jednom par\v cetu piletine\\
    \textbf{1} - 265\\ 
    \textbf{2} - 430\\
    \textbf{3} - 610\\
    \textbf{3} - 720
  \item Da li je bitna koli\v cina kalorija koja se konzumira dnevno\\
    \textbf{1} - ne znam koliko kalorija treba konzumirati dnevno\\
    \textbf{2} - uop\v ste nije bitno\\
    \textbf{3} - umereno je bitno\\
    \textbf{3} - veoma je bitno
  \item Procena kalorija u scone from starbucks\\
    \textbf{1} - 107 cal\\ 
    \textbf{2} - 315 cal\\ 
    \textbf{3} - 420 cal\\ 
    \textbf{3} - 980 cal
  \item Kafa\\
    Ispitanicima su ponu\dj ene dve slike i treba da ka\v zu \v sta ih asocira na kafu.\\
   \textbf{1} - creamy frapuccino\\
   \textbf{2} - espreso
  \item Comfort food\\
    Ispitanici treba da navedu od 3 do 5 comfort food.
  \item  comfort food reasons\\
    Ispitanici treba da navedu do 3 razloga za\v sto jedu comfort food? (npr. tuga, sre\' ca, bes, itd)
  \item comfort food reasons coded\\
   \textbf{1} - stres\\
   \textbf{2} - dosada\\
   \textbf{3} - depresija\\
   \textbf{4} - glad\\
   \textbf{5} - lenjost\\
   \textbf{6} - hladno vreme \\
   \textbf{7} - sre\'  ca\\ 
   \textbf{8} - gledanje televizije\\
   \textbf{9} - ni\v sta od navedenog 
\end{itemize}






% 11) cook – how often do you cook?
% 1 - Every day 
% 2 - A couple of times a week 
% 3 - Whenever I can, but that is not very often  
% 4 - I only help a little during holidays 
% 5 - Never, I really do not know my way around a kitchen

% 12) cuisine – what type of cuisine did you eat growing up?
% 1 – American
% 2 – Mexican.Spanish
% 3 – Korean/Asian
% 4 – Indian
% 5 – American inspired international dishes
% 6 – other

% (lots of cleaning needed for this variable)

% 13) diet_current – describe your current diet
% open ended – ideal for NLP
	

% 14) diet_current_coded
% (based on words used to describe the diet)

% 1 – healthy/balanced/moderated/
% 2 – unhealthy/cheap/too much/random/
% 3 – the same thing over and over
% 4 – unclear


% 15) which picture do you associate with the word “drink”?
% 1 – orange juice
% 2 – soda 





% 16) eating_changes  - Describe your eating changes since the moment you got into college?
% Open ended 

% 17) eating_changes_coded

% 1 – worse
% 2 – better
% 3 – the same
% 4 – unclear


% 18) eating_changes_coded1
% 1 – eat faster
% 2 – bigger quantity
% 3 – worse quality 
% 4 – same food
% 5 – healthier
% 6 – unclear
% 7 – drink coffee 
% 8 – less food
% 9 – more sweets
% 10 – timing 
% 11 – more carbs or snacking
% 12 – drink more water
% 13 – more variety


% 19) eating_out - frequency of eating out in a typical week 
% 1 - Never 
% 2 - 1-2 times 
% 3 - 2-3 times 
% 4 - 3-5 times 
% 5 - every day


% 20) employment – do you work? 
% 1 - yes full time 
% 2 - yes part time 
% 3 – no
% 4  - other


% 21) ethnic_food - How likely to eat ethnic food 
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 

% 22) exercise – how often do you exercise in a regular week?
% 1 - Everyday 
% 2 - Twice or three times per week 
% 3 - Once a week
% 4 - Sometimes 
% 5 – Never

% 23) father_education – 
% 1 - less than high school 
% 2 - high school degree 
% 3 - some college degree 
% 4 - college degree 
% 5 - graduate degree 


% 24) father_profession – what is your father profession?
% Open ended

% 25) fav_cuisine - What is your favorite cuisine?
% Open ended

% 26) fav_cuisine_coded

% 0-none
% 1 – Italian/French/greek
% 2 – Spanish/mexican
% 3 – Arabic/Turkish
% 4 – asian/chineses/thai/nepal
% 5 – American
% 6 – African 
% 7 – Jamaican
% 8 – indian


% 27) fav_food - was your favorite food cooked at home or store bought? 
% 1 - cooked at home 
% 2 - store bought 
% 3 - both bought at store and cooked at home

% 28) food_childhood – what was your favorite childhood food?
% Open ended


% 29) which of these pictures you associate with word fries? 
% 1 – Mcdonald’s fries
% 2 – home fries




% 30) fruit_day - How likely to eat fruit in a regular day 
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 


% 31) grade_level – 
% 1 - freshman 
% 2 -Sophomore 
% 3 - Junior 
% 4 - Senior

% 32) greek_food - How likely to eat greek food when available?
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 

% 33) healthy_feel – how likely are you to agree with the following statement: “I feel very healthy!” ?
% 1 to 10 where 1 is strongly agree and 10 is strongly disagree - scale

% 34) healthy_meal – what is a healthy meal? Describe in 2-3 sentences.
% Open ended

% 35) ideal_diet – describe your ideal diet in 2-3 sentences
% Open ended

% 36) Ideal_diet_coded

% 1 – portion control
% 2 – adding veggies/eating healthier food/adding fruit	
% 3 – balance
% 4 – less sugar
% 5 – home cooked/organic
% 6 – current diet
% 7 – more protein
% 8 – unclear

% 37) income
% 1 - less than $15,000 
% 2 - $15,001 to $30,000 
% 3 - $30,001 to $50,000 
% 4 - $50,001 to $70,000 
% 5 - $70,001 to $100,000 
% 6 - higher than $100,000

% 38) indian_food – how likely are you to eat indian food when available
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 


% 39) Italian_food – how likely are you to eat Italian food when available?

% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 

% 40) life_rewarding – how likely are you to agree with the following statement: “I feel life is very rewarding!” ?
% 1 to 10 where 1 is strongly agree and 10 is strongly disagree - scale

% 41) marital_status
% 1 -Single 
% 2 - In a relationship 
% 3 - Cohabiting 
% 4 - Married 
% 5 - Divorced 
% 6 - Widowed


% 42) meals_dinner_friend – What would you serve to a friend for dinner?
% Open ended

% 43) mothers_education 
% 1 - less than high school 
% 2 - high school degree 
% 3 - some college degree 
% 4 - college degree 
% 5 - graduate degree

% 44) mothers_profession – what is your mother’s profession? 

% 45) nutritional_check - checking nutritional values frequency 
% 1 - never 
% 2 - on certain products only 
% 3 - very rarely 
% 4 - on most products 
% 5 - on everything

% 46) on_off_campus – living situation
% 1 - On campus 
% 2 - Rent out of campus 
% 3 - Live with my parents and commute 
% 4 - Own my own house

% 47) parents_cook - Approximately how many days a week did your parents cook? 
% 1 - Almost everyday 
% 2 - 2-3 times a week 
% 3 - 1-2 times a week 
% 4 - on holidays only 
% 5 - never

% 48) pay_meal_out - How much would you pay for meal out? 
% 1 - up to $5.00 
% 2 - $5.01 to $10.00 
% 3 - $10.01 to $20.00 
% 4 - $20.01 to $30.00 
% 5 - $30.01 to $40.00 
% 6 - more than $40.01 

% 49) Persian_food - How likely to eat persian food when available?
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 

% 50) self_perception_weight - self perception of weight 
% 6 - i dont think myself in these terms 
% 5 - overweight 
% 4 - slightly overweight 
% 3 - just right 
% 2 - very fit 
% 1 - slim 

% 51) Which of the two pictures you associate with the word soup?
% 1 – veggie soup
% 2 – creamy soup





% 52) sports - sports – do you do any sporting activity?
 
% 1 - Yes 
% 2 - No 
% 99 – no answer

% 53) thai_food - How likely to eat thai food when available?
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4 - likely 
% 5 - very likely 

% 54) tortilla_calories - guessing calories in a burrito sandwhich from Chipolte?

% 1 - 580 
% 2 - 725 
% 3 - 940 
% 4 - 1165

% 55) turkey_calories - Can you guess how many calories are in the foods shown below? (Panera Bread Roasted Turkey and Avocado BLT)

% 1 - 345 
% 2 - 500 
% 3 - 690 
% 4 - 850


% 56) type_sports – what type of sports are you involved?
% Open-ended

% 57) veggies_day - How likely to eat veggies in a day? 
% 1 - very unlikely 
% 2 - unlikely 
% 3 - neutral 
% 4- likely 
% 5 - very likely

% 58) vitamins – do you take any supplements or vitamins?
% 1 – yes
% 2 – no

% 59) waffle_calories - guessing calories in waffle potato sandwhich 
% 1 - 575 
% 2 - 760 
% 3 - 900 
% 4 - 1315

% 60) weight – what is your weight in pounds? 



\section{Primer klasifikacije}

Odredi\' cemo klasifikaciju na osnovu atributa comfort\_food\_reasons\_coded, cook i eating\_out, dok \' ce nam ciljni atribut biti weight.\\

Najpre \' cemo u\v citati podatke i prikazati prvih pet redova.\\

\begin{lstlisting}[mathescape=true]
df = pd.read_csv('./food-choices/food_coded.csv')
print('\n{}'.format(df.head()))
\end{lstlisting}

\begin{verbatim}
  GPA  Gender  breakfast ... waffle_calories                    weight
0   2.4       2          1 ...            1315                       187
1 3.654       1          1 ...             900                       155
2   3.3       1          1 ...             900  I'm not answering this.
3   3.2       1          1 ...            1315             Not sure, 240
4   3.5       1          1 ...             760                       190
\end{verbatim}

Mo\v zemo uraditi osnovnu statistiku za svaku kolonu.

\begin{lstlisting}[mathescape=true]
print("\nStatistike skupa:\n{}".format(df.describe()))
\end{lstlisting}

\begin{verbatim}
Statistike skupa:
           Gender   breakfast  calories_chicken ... veggies_day    vitamins
count  125.000000  125.000000        125.000000 ...  125.000000  125.000000
mean     1.392000    1.112000        577.320000 ...    4.008000    1.512000
std      0.490161    0.316636        131.214156 ...    1.081337    0.501867
min      1.000000    1.000000        265.000000 ...    1.000000    1.000000
25%      1.000000    1.000000        430.000000 ...    3.000000    1.000000
50%      1.000000    1.000000        610.000000 ...    4.000000    2.000000
75%      2.000000    1.000000        720.000000 ...    5.000000    2.000000
max      2.000000    2.000000        720.000000 ...    5.000000    2.000000
\end{verbatim}

Za algoritam koji \v zelimo da primenimo, izdvoji\' cemo slede\' ce atribute: comfort\_food\_reasons\_coded, cook, eating\_out i weight.

\begin{lstlisting}[mathescape=true]
target_attribute = 'weight'
attribute_1 = 'comfort_food_reasons_coded'
attribute_2 = 'cook'
attribute_3 = 'eating_out'

df = df[[attribute_1, attribute_2, attribute_3, target_attribute]]
\end{lstlisting}

\begin{verbatim}
   comfort_food_reasons_coded  cook  eating_out                    weight
0                         9.0   2.0           3                       187
1                         1.0   3.0           2                       155
2                         1.0   1.0           2  I'm not answering this.
3                         2.0   2.0           2             Not sure, 240
4                         1.0   1.0           2                       190
\end{verbatim}

Kao \v sto mo\v zemo primetiti, nisu sve vrednosti celobrojne. Zato \' cemo obrisati sve redove koji sadr\v ze NaN-ove ili stringove u nekoj od ove \v cetiri kolone. Tako\dj e, vrednosti u koloni weight \' cemo transformisati. Preslika\' cemo ih u skup $\{0, 1, 2\}$.


\begin{lstlisting}[mathescape=true]
df = df.replace('nan', np.nan)
df = df.dropna()


df = df[df[target_attribute].apply(lambda x: str(x).isdigit())]

df.reset_index(drop=True, inplace=True)

df[attribute_1] = df.comfort_food_reasons_coded.astype(int)
df[attribute_2] = df.cook.astype(int)
df[attribute_3] = df.eating_out.astype(int)
df[target_attribute] = df.weight.astype(int)

changes = {}
weight = df[target_attribute].unique()
for w in weight:
    if int(w) <150:
        changes[w] = 0
    elif int(w) < 190:
        changes[w] = 1
    else:
        changes[w] = 2

df[target_attribute] = df[target_attribute].replace(changes)
\end{lstlisting}

\begin{verbatim}
   comfort_food_reasons_coded  cook  eating_out  weight
0                           9     2           3       1
1                           1     3           2       1
2                           1     1           2       2
3                           4     3           1       2
4                           1     2           2       1
\end{verbatim}

Sada \' cemo izvr\v siti podelu skupa na test i trening skup.

\begin{lstlisting}
X = df[[attribute_1, attribute_2, attribute_3]]
y = df[[target_attribute]]

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)
print("\nVelicina skupa za obucavanje: {}".format(X_train.size))
print("Velicina skupa za testiranje: {}".format(X_test.size))
\end{lstlisting}

\begin{verbatim}
Velicina skupa za obucavanje: 207
Velicina skupa za testiranje: 90
\end{verbatim}

Po\v sto smo izvr\v sili podelu skupa, primeni\' cemo algoritam za klasifikaciju - $k$ najbli\v zih suseda.

\begin{lstlisting}
clf = KNeighborsClassifier(5, 'distance')

# Treniramo model
clf.fit(X_train, y_train.values.ravel())

# Vrsimo predikciju
y_test_predicted = clf.predict(X_test)
y_train_predicted = clf.predict(X_train)

# Izracunavamo preciznost
train_acc = clf.score(X_train, y_train)
test_acc = clf.score(X_test, y_test)
print('train preciznost: {}'.format(train_acc))
print('test preciznost: {}'.format(test_acc))
\end{lstlisting}

\begin{verbatim}
train preciznost: 0.7536231884057971
test preciznost: 0.7
\end{verbatim}

Izve\v staj i matricu konfuzije mo\v zemo dobiti na slede\' ci na\v cin:

\begin{lstlisting}
test_rep = sklearn.metrics.classification_report(y_test, y_test_predicted)
train_rep = sklearn.metrics.classification_report(y_train, y_train_predicted)
print("\nTest izvestaj:\n{}".format(test_rep))
print("Trening izvestaj:\n{}".format(train_rep))

train_conf = sklearn.metrics.confusion_matrix(y_train, y_train_predicted)
test_conf = sklearn.metrics.confusion_matrix(y_test, y_test_predicted)
print("Matrica konfuzije za skup za obucavanje:\n{}".format(train_conf))
print("\nMatrica konfuzije za skup za testiranje:\n{}".format(test_conf))
\end{lstlisting}

\begin{verbatim}
Test izvestaj:
             precision    recall  f1-score   support

          0       0.67      0.91      0.77        11
          1       0.77      0.67      0.71        15
          2       0.50      0.25      0.33         4

avg / total       0.70      0.70      0.68        30

Trening izvestaj:
             precision    recall  f1-score   support

          0       0.74      0.86      0.79        29
          1       0.73      0.81      0.77        27
          2       1.00      0.38      0.56        13

avg / total       0.78      0.75      0.74        69

Matrica konfuzije za skup za obucavanje:
[[25  4  0]
 [ 5 22  0]
 [ 4  4  5]]

Matrica konfuzije za skup za testiranje:
[[10  1  0]
 [ 4 10  1]
 [ 1  2  1]]
\end{verbatim}


\begin{thebibliography}{9}
  \bibitem{knjiga1}Knjiga1
  \bibitem{knjiga2}Knjiga2
\end{thebibliography}

\end{document}
